---
title: "Rangified version of lexicographical_compare_three_way"
document: P2022R0
date: today
audience: 
    - LEWG
    - LWG
author:
    - name: Ran Regev
      email: <regev.ran@gmail.com>
toc: false
---   

# Motivation and Scope
This document adds the wording for ```ranges::lexicographical_compare_three_way``` that is missing in [@P1243R2]

# Proposed Wording

Add to __[algorithm.syn]__

Add to __ยง25.7.11 [alg.three.way]__


__Iterators__

> | template<class InputIterator1, class InputIterator2, class Cmp>
> |   constexpr auto
> |     lexicographical_compare_three_way(InputIterator1 b1, InputIterator1 e1,
> |                                       InputIterator2 b2, InputIterator2 e2,
> |                                       Cmp comp)
> |       -> common_comparison_category_t<decltype(comp(\*b1, \*b2)), strong_ordering>;

__Option I__

> ::: add
> | `template<`
> |     `input_iterator I1, sentinel_for<I1> S1,`
> |     `input_iterator I2, sentinel_for<I2> S2,`
> |     `class Proj1 = identity, `
> |     `class Proj2 = identity,`
> |     `indirect_binary_predicate<projected<I1,Proj1>, projected<I2,Proj2>> Pred = ranges::less    `
> | `>`
> | `constexpr auto`
> |     `ranges::lexicographical_compare_three_way( `
> |         `I1 i1, S1, I2 i2, S2, Pred pred = {}, Proj1 = {}, Proj2 = {}`
> |     `) -> std::common_comparison_category_t<decltype(pred(*i1, *i2)), std::strong_ordering>;`
> :::

__Option II__

> ::: add
> | `template<`
> |     `input_iterator I1, sentinel_for<I1> S1,`
> |     `input_iterator I2, sentinel_for<I2> S2,`
> |     `class Proj1 = identity, `
> |     `class Proj2 = identity,`
> |     `class Comp = ranges::less`
> | `>`
> | `requires indirectly_comparable<I1, I2, Comp, Proj1, Proj2>`
> | `constexpr auto`
> | `ranges::lexicographical_compare_three_way(`
> |     `I1 i1, S1, I2 i2, S2, Pred pred = {}, Proj1 = {}, Proj2 = {}`
> | `) -> std::common_comparison_category_t<decltype(pred(*i1, *i2)), std::strong_ordering>;`
> :::

__Option I__ vs. __Option II__

```diff
template<
    input_iterator I1, sentinel_for<I1> S1,
    input_iterator I2, sentinel_for<I2> S2,
    class Proj1 = identity, 
    class Proj2 = identity,
-   indirect_binary_predicate<projected<I1,Proj1>, projected<I2,Proj2>> Pred = ranges::less    
+   class Comp = ranges::less
>
+   requires indirectly_comparable<I1, I2, Comp, Proj1, Proj2>
constexpr auto
    ranges::lexicographical_compare_three_way( 
        I1 i1, S1, I2 i2, S2, Pred pred = {}, Proj1 = {}, Proj2 = {}
    ) -> std::common_comparison_category_t<decltype(pred(*i1, *i2)), std::strong_ordering>;
```

> ::: add
> | _Mandates_: decltype(pred(\*i1, \*i2)) is a comparison category type.
> | _Effects: same as ```std::lexicographical_compare_three_way```.
> :::



__Ranges__

> ::: add
> | template<
> |     input_range R1, input_range R2, 
> |     class Pred = ranges::less<>,
> |     class Proj1 = identity, 
> |     class Proj2 = identity
> | >
> | requires indirectly_comparable<iterator_t<R1>, iterator_t<R2>, Pred, Proj1, Proj2>
> | constexpr auto
> |     ranges::lexicographical_compare_three_way( 
> |         R1 r1, R2 r2, Pred pred = {}, Proj1 = {}, Proj2 = {}
> |     ) -> std::common_comparison_category_t<decltype( pred( \*r1.begin(), \*r2.begin() )), std::strong_ordering>;
> :::




# Acknowledgements
    Dan Raviv <dan.raviv@gmail.com>
    Michael Park <mcpark@gmail.com> (for github.com/mpark/wg21)

